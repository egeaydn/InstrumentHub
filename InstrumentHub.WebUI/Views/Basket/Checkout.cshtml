@using Instrument.WebUI.Models
@model OrderModel
@{
    ViewData["title"] = "Checkout";
}

<style>
    :root {
        --primary-color: #2980b9;
        --primary-hover: #1c5980;
        --danger-color: #c0392b;
        --danger-hover: #992d22;
        --background-color: #f5f7fa;
        --white: #fff;
        --text-color: #333;
        --heading-color: #2c3e50;
        --border-color: #ecf0f1;
    }

    body {
        background: var(--background-color);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: var(--text-color);
        margin: 0;
        padding: 0;
        line-height: 1.6;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    h1 {
        text-align: center;
        margin-top: 30px;
        color: var(--heading-color);
        font-size: 36px;
        font-weight: 300;
    }

    hr {
        border: none;
        height: 2px;
        background: var(--heading-color);
        width: 80%;
        margin: 20px auto;
    }

    form {
        background: var(--white);
        padding: 20px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .row {
        display: flex;
        flex-wrap: wrap;
        margin: -10px;
    }

    .col-md-8,
    .col-md-4 {
        padding: 10px;
    }

    .col-md-8 {
        flex: 0 0 66.6667%;
        max-width: 66.6667%;
    }

    .col-md-4 {
        flex: 0 0 33.3333%;
        max-width: 33.3333%;
    }

    
    {
        flex-direction: column;
    }

    .col-md-8,
    .col-md-4 {
        flex: 0 0 100%;
        max-width: 100%;
    }

    }

    h4 {
        margin-bottom: 20px;
        font-size: 20px;
        color: var(--heading-color);
        border-bottom: 2px solid var(--primary-color);
        display: inline-block;
        padding-bottom: 5px;
    }

    .form-control {
        width: 100%;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        padding: 10px;
        font-size: 16px;
        transition: border-color 0.3s ease;
        margin-bottom: 10px;
    }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 5px rgba(41, 128, 185, 0.5);
        }

    label {
        font-weight: 600;
        margin-bottom: 5px;
        display: block;
    }

    .text-danger {
        color: var(--danger-color);
        font-size: 14px;
    }

    #payment-box {
        background: var(--white);
        padding: 20px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        margin-top: 20px;
    }

    .custom-control {
        margin-bottom: 15px;
    }

    .custom-control-input:checked ~ .custom-control-label::before {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
    }

    .custom-control-label {
        margin-left: 5px;
    }

    .list-group {
        background: var(--white);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        padding: 0;
        margin-bottom: 20px;
        list-style: none;
    }

    .list-group-item {
        border: none;
        border-bottom: 1px solid var(--border-color);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

        .list-group-item:last-child {
            border-bottom: none;
        }

    .btn {
        display: inline-block;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        font-weight: bold;
        text-align: center;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        text-decoration: none;
    }

        .btn:focus {
            outline: none;
        }

    .btn-primary {
        background: var(--primary-color);
        color: var(--white);
    }

        .btn-primary:hover {
            background: var(--primary-hover);
            transform: scale(1.02);
        }

    .btn-lg {
        font-size: 18px;
        padding: 15px 20px;
        width: 100%;
    }

    .mb-3 {
        margin-bottom: 1rem;
    }

    .mb-4 {
        margin-bottom: 1.5rem;
    }

    .my-3 {
        margin: 1rem 0;
    }

</style>


<div class="container">
    <h1>Checkout</h1>
    <hr />
        
    <div asp-validation-summary="All" class="text-danger"></div>
    <form action="/checkout" method="POST">
        <div class="row">
            <div class="col-md-8">
                <h4>Order Details</h4>
                <div class="row">
                    <div class="col-md-6">
                        <label asp-for="FirstName"></label>
                        <input asp-for="FirstName" class="form-control" placeholder="Enter your first name" />
                        <span asp-validation-for="FirstName" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="LastName"></label>
                        <input asp-for="LastName" class="form-control" placeholder="Enter your last name" />
                        <span asp-validation-for="LastName" class="text-danger"></span>
                    </div>
                </div>
                <div class="mb-3">
                    <label asp-for="Adress"></label>
                    <textarea asp-for="Adress" class="form-control" placeholder="Enter your address"></textarea>
                    <span asp-validation-for="Adress" class="text-danger"></span>
                </div>
                <div class="mb-3">
                    <label asp-for="OrderNote"></label>
                    <textarea asp-for="OrderNote" class="form-control" placeholder="Any additional notes?"></textarea>
                    <span asp-validation-for="OrderNote" class="text-danger"></span>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label asp-for="City"></label>
                        <input asp-for="City" class="form-control" placeholder="City" />
                        <span asp-validation-for="City" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="Phone"></label>
                        <input asp-for="Phone" class="form-control" placeholder="Phone number" />
                        <span asp-validation-for="Phone" class="text-danger"></span>
                    </div>
                    <div class="col-md-6">
                        <label asp-for="Email"></label>
                        <input asp-for="Email" class="form-control" placeholder="Email address" />
                        <span asp-validation-for="Email" class="text-danger"></span>
                    </div>
                </div>
                <hr />
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="save-info" />
                    <label for="save-info" class="custom-control-label">Save this information for next time</label>
                </div>
                <hr class="mb-4" />
                <div class="d-block my-3">
                    <div class="custom-control custom-radio">
                        <input type="radio" class="custom-control-input" id="credit" name="paymentMethod" onclick="PaymentMethodChangeEvent('credit')" value="credit" checked required />
                        <label for="credit" class="custom-control-label">Credit Card</label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input type="radio" class="custom-control-input" id="eft" name="paymentMethod" onclick="PaymentMethodChangeEvent('eft')" value="eft" required />
                        <label for="eft" class="custom-control-label">Eft</label>
                    </div>
                </div>
                <div id="payment-box">
                    <h4 class="mb-4">Payment</h4>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="CardName"></label>
                            <input asp-for="CardName" class="form-control" placeholder="Name on card" />
                            <span asp-validation-for="CardName" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="CardNumber"></label>
                            <input asp-for="CardNumber" class="form-control" placeholder="Card number" />
                            <span asp-validation-for="CardNumber" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label asp-for="ExparationMonth"></label>
                            <input asp-for="ExparationMonth" class="form-control" placeholder="MM" />
                            <span asp-validation-for="ExparationMonth" class="text-danger"></span>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label asp-for="ExparationYear"></label>
                            <input asp-for="ExparationYear" class="form-control" placeholder="YYYY" />
                            <span asp-validation-for="ExparationYear" class="text-danger"></span>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label asp-for="CVV"></label>
                            <input asp-for="CVV" class="form-control" placeholder="CVV" />
                            <span asp-validation-for="CVV" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <hr />
                <button type="submit" class="btn btn-primary btn-lg btn-block">Complete Order</button>
            </div>
            <div class="col-md-4">
                <h4 class="mb-4">
                    <span class="text-muted">Your Cart</span>
                </h4>
                <ul class="list-group mb-3">
                    @if (Model.CartTemplate?.CartItems != null)
                    {
                        @foreach (var item in Model.CartTemplate.CartItems)
                        {
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="my-5">
                                        @item.ProductName
                                    </h6>
                                </div>
                                <span class="text-muted">@item.Price ₺ <small>x @(item.Quantity)</small></span>
                            </li>
                        }
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>Total (TL)</span>
                            <strong>@Model.CartTemplate?.TotalPrice().ToString("c")</strong>
                        </li>
                    }
                </ul>
            </div>
        </div>
    </form>
</div>

@section Scripts {

    <script>
        // Ödeme yöntemi seçimine göre payment-box alanını göster/gizle
        function PaymentMethodChangeEvent(method) {
            var paymentBox = document.getElementById("payment-box");
            if (method === "credit") {
                paymentBox.style.display = "block";
            } else {
                paymentBox.style.display = "none";
            }
        }

        // Sayfa yüklendiğinde seçili ödeme yöntemine göre payment-box'ı ayarla
        document.addEventListener("DOMContentLoaded", function () {
            var creditRadio = document.getElementById("credit");
            if (creditRadio && creditRadio.checked) {
                PaymentMethodChangeEvent("credit");
            } else {
                PaymentMethodChangeEvent("eft");
            }
        });
    </script>
}
